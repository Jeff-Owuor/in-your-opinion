{%extends "app/base.html"%}
{% load bootstrap4 %}
{% load static %}


{% block styles %}
{% bootstrap_css %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock %}

{% block content %}

    <h1 class="text-center">Quantify skill by the evidence</h1>
    <div class="container">
      <div class="row">
        {% for project in projects %}
        <div class="card mb-3">

          <img class="card-img-top" src="{{project.project.url}}" alt="Card image cap">
          <div class="card-body">
            <h5 class="card-title">{{project.project_title}}</h5>
            <p>{{ project.review_set.Rate_design.count }}</p>
            <p class="card-text">{{ project.project_description }}</p>
            <a href="{{ project.site_link }}" >Live Site Link</a>
            <a href="{% url 'rate_project' project.id %}"><i class="fa fa-star" aria-hidden="true"></i>Rate Project</a>
            <ul class="single-uservotes-votes">
              {% if not project.review.all %}
              <li>No user votes</li>
              {% else %}
               {% for user in project.review.all %}
              <li>
                  <article class="single-uservotes-votes-li-user">
                      <div class="single-uservotes-votes-li-user-image">
                          <img src="{{ user.user.profile.profile_photo.url }}" alt="">
                      </div>
                      <div class="single-uservotes-votes-li-user-name">
                          <p>{{ user.user.username }}</p>
                      </div>
                  </article>
                  <article class="single-uservotes-votes-li-ratings">
                      <div class="single-uservotes-votes-li-ratings-design">
                          <button>{{ user.rate_design }}</button>
                      </div>
                      <div class="single-uservotes-votes-li-ratings-usability">
                          <button>{{ user.rate_usability }}</button>
                      </div>
                      <div class="single-uservotes-votes-li-ratings-content">
                          <button>{{ user.rate_content }}</button>
                      </div>
                      <div class="single-uservotes-votes-li-ratings-overall">
                          <h2>{{ user.average_rating }}</h2>
                      </div>
                  </article>
              </li>
              {% endfor %}
               {% endif %}
          </ul>
          </div>
        </div>
        {% endfor %}
        
      </div>
  </div>
  
{%endblock%}

{% block scripts %}
{{block.super}}
   <script type="text/javascript" src="{% static 'js/home.js'%}"></script>
{% endblock %}

